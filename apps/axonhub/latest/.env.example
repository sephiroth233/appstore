# AxonHub 环境变量配置文件
# 将此文件复制为 .env 并根据需要修改

# ========================================
# 服务器配置
# ========================================

# 服务器端口
AXONHUB_SERVER_PORT=8090

# 服务器名称
AXONHUB_SERVER_NAME=AxonHub

# API 路由的基础路径
AXONHUB_SERVER_BASE_PATH=

# 请求超时时间
AXONHUB_SERVER_REQUEST_TIMEOUT=30s

# LLM 请求超时时间
AXONHUB_SERVER_LLM_REQUEST_TIMEOUT=600s

# 线程 ID 请求头名称
AXONHUB_SERVER_TRACE_THREAD_HEADER=AH-Thread-Id

# 追踪 ID 请求头名称
AXONHUB_SERVER_TRACE_TRACE_HEADER=AH-Trace-Id

# 额外的追踪请求头
AXONHUB_SERVER_TRACE_EXTRA_TRACE_HEADERS=

# 启用从 Claude Code 请求元数据中提取追踪 ID
AXONHUB_SERVER_TRACE_CLAUDE_CODE_TRACE_ENABLED=false

# 启用调试模式
AXONHUB_SERVER_DEBUG=false

# ========================================
# 数据库配置
# ========================================

# 数据库类型: sqlite3, postgres, mysql
AXONHUB_DB_DIALECT=sqlite3

# 数据库连接字符串
# SQLite 示例: file:axonhub.db?cache=shared&_fk=1
# PostgreSQL 示例: postgres://user:pass@localhost/axonhub?sslmode=disable
# MySQL 示例: user:pass@tcp(localhost:3306)/axonhub?charset=utf8mb4&parseTime=True
AXONHUB_DB_DSN=file:/app/data/axonhub.db?cache=shared&_fk=1

# 启用数据库调试日志
AXONHUB_DB_DEBUG=false

# ========================================
# 缓存配置
# ========================================

# 缓存模式，可选值: memory (内存), redis, two-level (内存 + redis 两级缓存)
AXONHUB_CACHE_MODE=memory

# 内存缓存过期时间
AXONHUB_CACHE_MEMORY_EXPIRATION=5s

# 内存缓存清理间隔
AXONHUB_CACHE_MEMORY_CLEANUP_INTERVAL=10m

# Redis 服务器地址，例如: 127.0.0.1:6379
AXONHUB_CACHE_REDIS_ADDR=

# Redis 用户名（可选）
AXONHUB_CACHE_REDIS_USERNAME=

# Redis 密码（可选）
AXONHUB_CACHE_REDIS_PASSWORD=

# Redis 数据库索引
AXONHUB_CACHE_REDIS_DB=0

# Redis 缓存过期时间
AXONHUB_CACHE_REDIS_EXPIRATION=30m

# ========================================
# 日志配置
# ========================================

# 日志记录器名称
AXONHUB_LOG_NAME=axonhub

# 启用调试日志
AXONHUB_LOG_DEBUG=false

# 日志级别: debug, info, warn, error, panic, fatal
AXONHUB_LOG_LEVEL=info

# 日志级别字段的键名
AXONHUB_LOG_LEVEL_KEY=level

# 时间戳字段的键名
AXONHUB_LOG_TIME_KEY=time

# 调用者信息字段的键名
AXONHUB_LOG_CALLER_KEY=label

# 函数字段的键名
AXONHUB_LOG_FUNCTION_KEY=

# 日志记录器名称字段的键名
AXONHUB_LOG_NAME_KEY=logger

# 日志编码格式: json, console, console_json
AXONHUB_LOG_ENCODING=json

# 要包含的日志记录器名称
AXONHUB_LOG_INCLUDES=

# 要排除的日志记录器名称
AXONHUB_LOG_EXCLUDES=

# 输出目标: file 或 stdio
AXONHUB_LOG_OUTPUT=stdio

# 日志文件路径
AXONHUB_LOG_FILE_PATH=logs/axonhub.log

# 轮转前的最大文件大小(MB)
AXONHUB_LOG_FILE_MAX_SIZE=100

# 保留的最大天数
AXONHUB_LOG_FILE_MAX_AGE=30

# 保留的旧日志文件最大数量
AXONHUB_LOG_FILE_MAX_BACKUPS=10

# 轮转文件使用本地时间
AXONHUB_LOG_FILE_LOCAL_TIME=true

# ========================================
# 指标配置
# ========================================

# 启用指标收集
AXONHUB_METRICS_ENABLED=false

# 指标导出器类型: prometheus, console, oltphttp
AXONHUB_METRICS_EXPORTER_TYPE=oltphttp

# 指标导出器端点
AXONHUB_METRICS_EXPORTER_ENDPOINT=localhost:8080

# 启用非安全连接
AXONHUB_METRICS_EXPORTER_INSECURE=true

# ========================================
# 转储配置
# ========================================

# 启用错误时的数据转储
AXONHUB_DUMPER_ENABLED=false

# 转储数据的目录
AXONHUB_DUMPER_DUMP_PATH=./dumps

# 转储文件的最大大小(MB)
AXONHUB_DUMPER_MAX_SIZE=100

# 保留转储文件的最大时长
AXONHUB_DUMPER_MAX_AGE=24h

# 保留的旧转储文件最大数量
AXONHUB_DUMPER_MAX_BACKUPS=10

# ========================================
# 垃圾回收配置
# ========================================

# GC 执行的 Cron 表达式
# 格式: 分钟 小时 日期 月份 星期
# 示例:
#   "0 2 * * *"   - 每天凌晨 2:00
#   "0 3 * * 0"   - 每周日凌晨 3:00
#   "0 4 1 * *"   - 每月 1 号凌晨 4:00
AXONHUB_GC_CRON=0 2 * * *

